/*!
 *
 * SCROLLFY jQuery Plugin v2.0
 *
 * Listens on scroll and fires events with direction and more
 * Makes it possible to create awesome scroll animations, i think ;-)
 *
 * Made with love by Hendrik Reimers <hendrik.reimers@gmail.com>
 * www.kern23.de / www.core23.com / www.github.com/hendrikreimers
 *
 * Requirements:
 *    jQuery v3.3.1+
 *    Modern Browsers (IE 10+, ...)
 *
 * Hint:
 *    If you want that the elements are visible on load,
 *    you need to add the event listeners first and call the plugin at last.
 *    see the demos for details.
 */
!function(e){e.fn.scrollfy=function(t){var n={defaultOffset:50,offsetAttrTop:"scrollfy-offset-top",offsetAttrBottom:"scrollfy-offset-bottom",eventNames:{scrollBegin:"scrollfy:scroll:begin",scroll:"scrollfy:scroll",scrollEnd:"scrollfy:scroll:end",inView:"scrollfy:inView",offView:"scrollfy:offView"},scrollTimeout:250,directionTimeout:50,listenTo:"scroll touchmove resize",inviewIdentifier:"scrollfy-inview",respectElementMargin:!1},o={all:null,self:null,elements:{},timeoutScroll:null,timeoutDirection:null,lastScrollPosY:0,direction:"down",scrolling:!1},i={init:function(t,l){return o.self=l,n=e.extend({},n,t),i.bindListener(),i.checkElementsView(o.self),o.self},destroy:function(){e(window,document).off(n.listenTo)},bindListener:function(){e(window,document).on(n.listenTo,function(){window.requestAnimationFrame(function(){i.directionWatch(),0==o.scrolling&&i.onScrollBegin(),i.onScroll(),i.checkElementsView(o.self),clearTimeout(o.timeoutScroll),o.timeoutScroll=null,o.timeoutScroll=setTimeout(function(){i.onScrollEnd()},n.scrollTimeout)})})},directionWatch:function(){var e=i.getViewportOffset("top");e>o.lastScrollPosY?o.direction="down":o.direction="up",o.lastScrollPosY=e<=0?0:e},onScroll:function(){var t=i.getEventObj(n.eventNames.scroll);o.direction.length>0&&(t=i.setEventData(t,{direction:o.direction,scrolling:o.scrolling}),i.fireEvent(t,e(window,document)),i.fireEvent(t,e(o.self)))},onScrollBegin:function(){o.scrolling=!0;var t=i.setEventData(i.getEventObj(n.eventNames.scrollBegin),{direction:o.direction,scrolling:o.scrolling});i.fireEvent(t,e(window,document)),i.fireEvent(t,e(o.self))},onScrollEnd:function(){o.scrolling=!1;var t=i.setEventData(i.getEventObj(n.eventNames.scrollEnd),{direction:o.direction,scrolling:o.scrolling});clearTimeout(o.timeoutDirection),o.timeoutDirection=null,o.direction="",i.fireEvent(t,e(window,document)),i.fireEvent(t,e(o.self))},checkElementsView:function(t){if(t.length){var o=i.getViewportSize(),l=i.getViewportOffset();l&&o&&e(t).each(function(t,r){var c=i.getElementOffset(r),f=i.getElementSize(r,!0,n.respectElementMargin),s=(e(r).data(n.inviewIdentifier),e(r).data(n.offsetAttrTop)?e(r).data(n.offsetAttrTop):n.defaultOffset),u=e(r).data(n.offsetAttrBottom)?e(r).data(n.offsetAttrBottom):n.defaultOffset,d=c.top+s>l.top,a=c.top+f.height-s>l.top,m=c.top+u<l.top+o.height,w=c.top+f.height+u<l.top+o.height;i.elementInviewStatus(r)?(d||a)&&m||(i.elementInviewStatus(r,!1),i.fireEvent(i.setEventData(i.getEventObj(n.eventNames.offView),{inview:i.elementInviewStatus(r)}),r)):(d&&m||a&&w)&&(i.elementInviewStatus(r,!0),i.fireEvent(i.setEventData(i.getEventObj(n.eventNames.inView),{inview:i.elementInviewStatus(r)}),r))})}},elementInviewStatus:function(t,o){return null!=o?e(t).data(n.inviewIdentifier,o):e(t).data(n.inviewIdentifier)},getElementOffset:function(e){var t=0,n=0;do{isNaN(e.offsetLeft)||(t+=e.offsetLeft),isNaN(e.offsetTop)||(n+=e.offsetTop)}while(e=e.offsetParent);return{top:n,left:t}},getElementSize:function(t,n,o){return n?(o=!!o,{width:e(t).outerWidth(o),height:e(t).outerHeight(o)}):{width:e(t).width(),height:e(t).height()}},getViewportOffset:function(t){var n=window.pageYOffset||document.documentElement.scrollTop||e(window).scrollTop(),o=window.pageXOffset||document.documentElement.scrollLeft||e(window).scrollLeft();return"top"==t?n:"left"==t?o:{top:n,left:o}},getViewportSize:function(){var t,n,o={height:window.innerHeight,width:window.innerWidth};return o.height||!(t=document.compatMode)&&e.support.boxModel||(o={height:(n="CSS1Compat"===t?documentElement:document.body).clientHeight,width:n.clientWidth}),o},getEventObj:function(e){return jQuery.Event(e)},setEventData:function(t,n){return t.scrollfy={direction:n.direction,scrolling:n.scrolling},n||(t.scrollfy=e.extend({},t.scrollfy,n)),t},fireEvent:function(t,n){return e(n).trigger(t)},getDirection:function(){return o.direction}};return i.init(t,e(this))}}(jQuery);